var pe=Object.defineProperty,_e=Object.defineProperties;var ve=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var Z=(e,s,t)=>s in e?pe(e,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[s]=t,q=(e,s)=>{for(var t in s||(s={}))ge.call(s,t)&&Z(e,t,s[t]);if(ae)for(var t of ae(s))he.call(s,t)&&Z(e,t,s[t]);return e},G=(e,s)=>_e(e,ve(s));var le=(e,s,t)=>(Z(e,typeof s!="symbol"?s+"":s,t),t);import{C as fe,a as me,d as M,o as v,c as g,r as ne,n as O,b as a,e as w,t as L,f as T,g as m,w as P,h as k,v as we,i as $e,F as K,j as Y,p as U,k as R,l as y,m as E,u as l,q as N,s as X,x as ee,y as z,z as B,A as ye,B as xe,D as Fe,E as be,G as ke,H as Ee}from"./vendor.1aa4b248.js";const Be=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const p of n)if(p.type==="childList")for(const d of p.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function t(n){const p={};return n.integrity&&(p.integrity=n.integrity),n.referrerpolicy&&(p.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?p.credentials="include":n.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function o(n){if(n.ep)return;n.ep=!0;const p=t(n);fetch(n.href,p)}};Be();const x=({type:e,text:s})=>{let t=document.getElementById("alert-box");var o=document.createElement("div");let n={success:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M352 176L217.6 336L160 272"></path></svg>',warning:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path d="M250.26 166.05L256 288l5.73-121.95a5.74 5.74 0 0 0-5.79-6h0a5.74 5.74 0 0 0-5.68 6z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M256 367.91a20 20 0 1 1 20-20a20 20 0 0 1-20 20z" fill="currentColor"></path></svg>',danger:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 320L192 192"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M192 320l128-128"></path></svg>'};o.innerHTML=`${n[e]}<span>${s}</span>`,o.style.cssText="",o.setAttribute("class",`alert alert-${e} shadow`),t.appendChild(o,t.childNodes[0]),setTimeout(()=>{o.setAttribute("class",`alert alert-${e} alert-show shadow`),setTimeout(()=>{o.setAttribute("class",`alert alert-${e} alert-hidden`),setTimeout(()=>{t.removeChild(o)},250)},2500)},10)};function ue(e){if(!e)return"";var s=1024;return e<s?e+" b":e<Math.pow(s,2)?(e/s).toFixed(2)+" KB":e<Math.pow(s,3)?(e/Math.pow(s,2)).toFixed(2)+" M":e<Math.pow(s,4)?(e/Math.pow(s,3)).toFixed(2)+" G":(e/Math.pow(s,4)).toFixed(2)+" T"}function te(){var e=new fe(".copy-btn");e.on("success",s=>{x({type:"success",text:"\u590D\u5236\u6210\u529F"}),e.destroy()}),e.on("error",s=>{x({type:"danger",text:"\u590D\u5236\u5931\u8D25"}),e.destroy()})}function Ie(e){switch(!0){case e=="Bad credentials":return"access token\u9519\u8BEF";case e.indexOf("wasn't supplied")>=0:return"\u5DF2\u6709\u540C\u540D\u6587\u4EF6\u5939";case e=="This repository is empty.":return"\u5F53\u524D\u4ED3\u5E93\u4E3A\u7A7A\uFF0C\u8BF7\u65B0\u5EFA\u6587\u4EF6\u5939";case e=="path cannot start with a slash":return"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A";case e=="Requires authentication":return"access token\u9519\u8BEF";case e=="Resource not accessible by personal access token":return"\u8BE5\u4ED3\u5E93\u672A\u6388\u6743";default:return"\u672A\u77E5\u9519\u8BEF"}}class Se{constructor(s){le(this,"instance");this.instance=me.create(s),this.instance.interceptors.request.use(t=>{let o=localStorage.getItem("token");return o&&(t.headers={Authorization:`token ${o}`}),t},t=>(console.log(t),Promise.reject(t))),this.instance.interceptors.response.use(t=>t,t=>(t.response.data.message!="Not Found"&&x({type:"danger",text:Ie(t.response.data.message)}),Promise.reject(t)))}request(s){return new Promise((t,o)=>{this.instance.request(s).then(n=>{t(n)}).catch(n=>(o(n),n))})}get(s){return this.request(G(q({},s),{method:"GET"}))}put(s){return this.request(G(q({},s),{method:"PUT"}))}post(s){return this.request(G(q({},s),{method:"POST"}))}patch(s){return this.request(G(q({},s),{method:"PATCH"}))}delete(s){return this.request(G(q({},s),{method:"DELETE"}))}}const V=new Se({baseURL:"https://api.github.com",timeout:3e4});var D=(e,s)=>{for(const[t,o]of s)e[t]=o;return e};const Ae=M({props:{type:{type:String,default:"default"},loading:{type:Boolean,default:!1}},setup(e){const s=e;return(t,o)=>(v(),g("button",{class:O(["button",`button-${s.type}  ${s.loading?"button-loading":""}`])},[ne(t.$slots,"default",{},void 0,!0)],2))}});var S=D(Ae,[["__scopeId","data-v-831ff948"]]);const Ce={class:"title-label"},Le=["href"],De=["innerHTML"],Me=M({props:{title:{type:String,default:"\u6807\u9898"},direction:{type:String,default:""},small_title:{type:String,default:""},small_title_link:{type:String,default:""},tips:{type:String,default:""}},setup(e){const s=e;return(t,o)=>(v(),g("div",{class:O(["form-item",{isRow:s.direction=="row"}])},[a("label",Ce,[w(L(s.title)+" ",1),s.small_title?(v(),g("a",{key:0,target:"_blank",href:s.small_title_link},L(s.small_title),9,Le)):T("",!0)]),a("div",null,[ne(t.$slots,"default",{},void 0,!0),e.tips?(v(),g("p",{key:0,class:"tips",innerHTML:e.tips},null,8,De)):T("",!0)])],2))}});var Q=D(Me,[["__scopeId","data-v-d1e40378"]]);const Oe=["disabled"],Te=M({props:{modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,o=m(t.modelValue);P(()=>t.modelValue,()=>{o.value=t.modelValue});const n=p=>{let{value:d}=p.target;s("update:modelValue",d)};return(p,d)=>k((v(),g("input",{"onUpdate:modelValue":d[0]||(d[0]=c=>o.value=c),onInput:n,disabled:t.disabled},null,40,Oe)),[[we,o.value]])}});var re=D(Te,[["__scopeId","data-v-52faccfe"]]);const Ve=e=>(U("data-v-322ba80e"),e=e(),R(),e),Pe=Ve(()=>a("option",{value:"",hidden:""},"\u65E0\u9009\u62E9",-1)),Ne=["value"],qe=M({props:{modelValue:{type:String||Number,default:""},option:{type:Array,default:[]},label:{type:String||Number,default:""},value:{type:String||Number,default:""}},emits:["update:modelValue"],setup(e,{emit:s}){const t=e,o=m(t.modelValue);P(()=>t.modelValue,()=>{o.value=t.modelValue});const n=p=>{let{value:d}=p.target;s("update:modelValue",d)};return(p,d)=>k((v(),g("select",{"onUpdate:modelValue":d[0]||(d[0]=c=>o.value=c),onChange:n},[Pe,(v(!0),g(K,null,Y(t.option,c=>(v(),g("option",{value:c[e.value],key:c[e.label]},L(c[e.label]),9,Ne))),128))],544)),[[$e,o.value]])}});var Ge=D(qe,[["__scopeId","data-v-322ba80e"]]);const Ue={class:"form-item btn-box"},Re=w(" \u786E\u8BA4 "),je=w("\u53D6\u6D88"),ze=M({props:{isOpen:Boolean},emits:["close","updateFolderList"],setup(e,{emit:s}){const t=e;let o=JSON.parse(localStorage.getItem("github_config")),n=m(""),p=m(!1);const d=()=>{if(!(o==null?void 0:o.repoId)){x({type:"danger",text:"\u8BF7\u5148\u8BBE\u7F6Etoken\u4FE1\u606F"});return}p.value=!0,V.put({url:`/repos/${o.owner}/${o.repoPath}/contents/${n.value}/init`,data:{message:"create a forder",content:"Y3JlYXRlIGEgZm9yZGVy"}}).then(c=>{p.value=!1,x({type:"success",text:"\u521B\u5EFA\u6210\u529F"}),n.value="",s("close"),s("updateFolderList")}).catch(()=>{p.value=!1})};return(c,h)=>(v(),g("div",{class:O(["folder-modal",{isOpen:t.isOpen}])},[y(l(Q),{title:"\u65B0\u5EFA\u6587\u4EF6\u5939"},{default:E(()=>[y(l(re),{modelValue:l(n),"onUpdate:modelValue":h[0]||(h[0]=_=>N(n)?n.value=_:n=_),placeholder:"\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a("div",Ue,[y(l(S),{onClick:h[1]||(h[1]=_=>d()),type:"primary",loading:l(p)},{default:E(()=>[Re]),_:1},8,["loading"]),y(l(S),{onClick:h[2]||(h[2]=_=>s("close")),type:"danger"},{default:E(()=>[je]),_:1})])],2))}});var He=D(ze,[["__scopeId","data-v-25d89099"]]);const Je=(e,s)=>new Promise(async t=>{const o=await Ke(e);t({name:`${e.name.substring(0,e.name.lastIndexOf("."))}_${Qe(4)}`,orginal_size:e.size,orginal_base64data:o.replace(/^data:image\/\w+;base64,/,""),orginal_base64:o,folder:s,ext:Ye(e.name)})}),Ke=e=>new Promise(async s=>{var t=new FileReader;t.readAsDataURL(e),t.onload=function(o){s(o.target.result)}});function Ye(e){var s=/\.[^\.]+$/,t=s.exec(e);return t?t[0]:""}function Qe(e){return Array.from(Array(Number(e)||24),()=>Math.floor(Math.random()*36).toString(36)).join("")}const W=e=>(U("data-v-2fe1cf1c"),e=e(),R(),e),We=W(()=>a("path",{d:"M400 145.49L366.51 112L256 222.51L145.49 112L112 145.49L222.51 256L112 366.51L145.49 400L256 289.49L366.51 400L400 366.51L289.49 256L400 145.49z",fill:"currentColor"},null,-1)),Ze=[We],Xe={class:"upload-list"},et=W(()=>a("svg",{class:"upload-icon",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},[a("path",{d:"M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8c-69 0-113.44 45.79-128 91.2c-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18"}),a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18",d:"M320 255.79l-64-64l-64 64"}),a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18",d:"M256 448.21V207.79"})],-1)),tt={class:"title-label"},st={class:"status-box"},ot={class:"icon icon-success",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},at=W(()=>a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"square","stroke-miterlimit":"10","stroke-width":"44",d:"M416 128L192 384l-96-96"},null,-1)),lt=[at],nt={class:"icon icon-uploading",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ut=W(()=>a("path",{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208s208-93.13 208-208S370.87 48 256 48zm83.69 282.65a112.24 112.24 0 0 1-195-61.29a16 16 0 0 1-20.13-24.67l23.6-23.6a16 16 0 0 1 22.37-.25l24.67 23.6a16 16 0 0 1-18 26a80.25 80.25 0 0 0 138.72 38.83a16 16 0 0 1 23.77 21.41zm47.76-63.34l-23.6 23.6a16 16 0 0 1-22.37.25l-24.67-23.6a16 16 0 0 1 17.68-26.11A80.17 80.17 0 0 0 196 202.64a16 16 0 1 1-23.82-21.37a112.17 112.17 0 0 1 194.88 61.57a16 16 0 0 1 20.39 24.47z",fill:"currentColor"},null,-1)),rt=[ut],it={class:"info"},dt={class:"name"},ct={class:"tag-box"},pt={class:"tag folder"},_t={class:"tag orginal-size"},vt=["src"],gt={class:"btn-box"},ht=w("\u6E05\u7A7A"),ft=w("\u4E0A\u4F20"),mt=M({props:{isOpen:Boolean,folders:Array},emits:["Close","SetLoading"],setup(e,{emit:s}){const t=e;let o=JSON.parse(localStorage.getItem("github_config"));const n=X(),p=ee();let d=m(n.query.folder),c=m([]),h=m(null),_=m(!1),F=m(!1);P(()=>n.query,u=>{d.value=u.folder||""}),P(()=>d.value,u=>{n.path!="/setting"&&p.push(`/?folder=${u}`)}),z(()=>{let u=document.getElementById("drop-area");u.addEventListener("drop",C,!1);let i="";u.addEventListener("dragleave",r=>{clearTimeout(i),i=setTimeout(()=>{r.stopPropagation(),r.preventDefault(),F.value=!1},100)}),u.addEventListener("dragover",r=>{r.stopPropagation(),r.preventDefault(),F.value=!0})});const A=u=>{if(!d.value){x({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}let i=u.target.files;f(i)},C=u=>{if(!d.value){x({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}let i=u.dataTransfer.files;F.value=!1,u.stopPropagation(),u.preventDefault();let r=[];for(let $=0;$<=i.length-1;$++)i[$].type.indexOf("image")!==-1?r.push(i[$]):x({type:"danger",text:`${i[$].name}\u4E0D\u662F\u56FE\u7247\u6587\u4EF6`});f(r)},f=async u=>{_.value=!0,x({type:"warning",text:"\u6B63\u5728\u8BFB\u53D6"});let i=[];i=await Promise.all([...u].map(r=>Je(r,d.value))),x({type:"success",text:"\u8BFB\u53D6\u5B8C\u6210"}),_.value=!1,c.value=c.value.concat(i)},b=async u=>{h.value=u;let i=0;await Promise.all(c.value.map((r,$)=>(c.value[$].status="uploading",new Promise(H=>{let J=`${r.name}${r.ext}`;setTimeout(()=>{V.put({url:`/repos/${o.owner}/${o.repoPath}/contents/${d.value}/${J}`,data:{message:"upload images",content:r.orginal_base64data}}).then(ce=>{let j=ce.data.content;r.status="success",c.value[$].status="success",r.url=j.url,r.download_url=j.download_url,r.cdn_url=`https://git.pink/${o.owner}/${o.repoPath}/blob/main/${d.value}/${J}?raw=true`,r.html_url=j.html_url,r.git_url=j.git_url,r.sha=j.sha,r.upload_type=u,I(r),H(200)}).catch(()=>{r.status="fail",c.value[$].status="fail",H(400)})},i+=1e3)})))),x({type:"success",text:"\u4E0A\u4F20\u5B8C\u6210"}),h.value=0,c.value=c.value.filter(r=>r.status!="success"),p.push(n.fullPath+="&t="+new Date().getTime())},I=u=>{u.name,u.orginal_size,u.folder,u.status,u.ext,u.cdn_url};return(u,i)=>(v(),g("div",{class:O(["image-modal",{isOpen:t.isOpen}]),id:"drop-area"},[(v(),g("svg",{onClick:i[0]||(i[0]=r=>s("Close")),class:"icon-close",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ze)),a("div",Xe,[a("label",{class:O(["upload-box",{dropActive:l(F),uploadBoxLoading:l(_)}])},[et,w(L(l(F)?"\u677E\u5F00\u9F20\u6807\u4E0A\u4F20\u6587\u4EF6":"\u70B9\u51FB\u6216\u62D6\u62FD\u5230\u6B64\u5904\u4E0A\u4F20\u6587\u4EF6")+" ",1),k(a("input",{onChange:A,type:"file",name:"file",accept:"image/*",multiple:""},null,544),[[B,!1]])],2),k(a("div",tt,"\u5F85\u4E0A\u4F20\u56FE\u7247",512),[[B,l(c).length>0]]),(v(!0),g(K,null,Y(l(c),r=>(v(),g("div",{key:r.name,class:"item"},[a("div",st,[k((v(),g("svg",ot,lt,512)),[[B,r.status=="success"]]),k((v(),g("svg",nt,rt,512)),[[B,r.status=="uploading"]])]),a("div",it,[a("div",dt,L(`${r.name}${r.ext}`),1),a("div",ct,[a("span",pt,L(r.folder),1),a("span",_t,L(l(ue)(r.orginal_size)),1)])]),a("img",{src:r.orginal_base64,class:"image"},null,8,vt)]))),128))]),a("div",gt,[k(y(l(S),{style:{width:"220px"},onClick:i[1]||(i[1]=r=>N(c)?c.value=[]:c=[]),type:"danger"},{default:E(()=>[ht]),_:1},512),[[B,l(c).length>0]]),k(y(l(S),{onClick:i[2]||(i[2]=r=>b(1)),type:"primary",style:{width:"220px"},loading:l(h)==1},{default:E(()=>[ft]),_:1},8,["loading"]),[[B,l(c).length>0]])])],2))}});var wt=D(mt,[["__scopeId","data-v-2fe1cf1c"]]);const se=e=>(U("data-v-e4a97780"),e=e(),R(),e),$t={class:"wrapper"},yt={class:"sidebar"},xt=se(()=>a("div",{class:"header"},[a("div",{class:"mask"}),a("div",{class:"logo"},"PicBox")],-1)),Ft=["href"],bt=se(()=>a("span",{class:"status-point"},null,-1)),kt={class:"tips"},Et={key:0},Bt={key:1},It={key:2},St=w("\u672A\u8BBE\u7F6Etoken"),At=se(()=>a("br",null,null,-1)),Ct=w("\u8BF7\u70B9\u51FB\u4E0B\u65B9\u8BBE\u7F6E"),Lt=[St,At,Ct],Dt=w(" \u65B0\u5EFA\u6587\u4EF6\u5939 "),Mt={class:"handle-box"},Ot=w(" \u4E0A\u4F20\u56FE\u7247 "),Tt=w(" \u65B0\u5EFA\u6587\u4EF6\u5939 "),Vt={href:"/picbox/#/setting"},Pt=w(" \u8BBE\u7F6E "),Nt={href:"/picbox/#/about"},qt=w(" \u5173\u4E8E "),Gt=M({emits:["SetImageModal"],setup(e,{expose:s,emit:t}){let o=JSON.parse(localStorage.getItem("github_config"));const n=X(),p=ee();let d=m([]),c=m(!1),h=m(!1),_=m(!1);z(()=>{(o==null?void 0:o.repoId)&&F()}),P(()=>n.query,C=>{_.value=!1,!(o==null?void 0:o.owner)&&n.path!="/setting"&&n.path!="/about"?p.push("/setting"):n.query.reload&&F()}),P(()=>h.value,C=>{h.value?t("SetImageModal",!0):t("SetImageModal",!1)});const F=()=>{c.value=!0,V.get({url:`/repositories/${o.repoId}/contents?t=${new Date().getTime()}`}).then(C=>{c.value=!1,d.value=C.data.filter(f=>f.type=="dir"),n.path=="/"&&!n.query.folder&&p.push(`/?folder=${d.value[0].name}`)}).catch(()=>{c.value=!1})},A=()=>{if(!(o==null?void 0:o.repoId)){x({type:"danger",text:"\u8BF7\u5148\u8BBE\u7F6Etoken\u4FE1\u606F"});return}h.value=!h.value};return s({changeImageModel:A}),(C,f)=>{var b,I,u;return v(),g("div",$t,[a("div",yt,[xt,a("div",{class:O(["folder",{loading:l(c)}])},[(v(!0),g(K,null,Y(l(d),(i,r)=>(v(),g("a",{key:r,class:O(["item",{active:l(n).query.folder==i.name}]),href:`/#/?folder=${i.name}`},[w(L(i.name)+" ",1),bt],10,Ft))),128)),k(a("div",kt,[l(d).length!=0?(v(),g("span",Et,L(l(d).length)+" \u4E2A\u6587\u4EF6\u5939",1)):T("",!0),((b=l(o))==null?void 0:b.owner)&&l(d).length==0?(v(),g("span",Bt,"\u6682\u65E0\u6587\u4EF6\u5939 ")):T("",!0),((I=l(o))==null?void 0:I.owner)?T("",!0):(v(),g("span",It,Lt))],512),[[B,!l(c)]]),((u=l(o))==null?void 0:u.owner)&&l(d).length==0?k((v(),ye(S,{key:0,style:{"margin-top":"10px"},type:"primary",onClick:f[0]||(f[0]=i=>N(_)?_.value=!l(_):_=!l(_))},{default:E(()=>[Dt]),_:1},512)),[[B,!l(c)]]):T("",!0)],2),y(He,{onClose:f[1]||(f[1]=i=>N(_)?_.value=!1:_=!1),onUpdateFolderList:f[2]||(f[2]=i=>F()),isOpen:l(_)},null,8,["isOpen"]),a("div",Mt,[y(S,{onClick:A},{default:E(()=>[Ot]),_:1}),y(S,{onClick:f[3]||(f[3]=i=>N(_)?_.value=!l(_):_=!l(_))},{default:E(()=>[Tt]),_:1}),a("a",Vt,[y(S,null,{default:E(()=>[Pt]),_:1})]),a("a",Nt,[y(S,null,{default:E(()=>[qt]),_:1})])])]),y(wt,{isOpen:l(h),folders:l(d),onClose:A},null,8,["isOpen","folders"])])}}});var Ut=D(Gt,[["__scopeId","data-v-e4a97780"]]);const Rt=e=>(U("data-v-587a49fc"),e=e(),R(),e),jt={class:"wrapper"},zt=Rt(()=>a("div",{id:"alert-box"},null,-1)),Ht=M({setup(e){let s=m(!1),t=m(!1);const o=c=>{s.value=c},n=c=>{t.value=c},p=m(null),d=()=>{p.value.changeImageModel()};return z(()=>{localStorage.getItem("github_config")&&JSON.parse(localStorage.getItem("github_config"))}),(c,h)=>{const _=xe("router-view");return v(),g("div",jt,[zt,y(Ut,{onSetImageModal:o,ref:(F,A)=>{A.sideberRef=F,p.value=F}},null,512),a("div",{class:O(["main",{loading:l(t)}]),id:"main",style:Fe(l(s)?"width:calc(100% - 500px);margin-left:300px":"width:calc(100% - 200px)")},[y(_,{onSetLoading:n,onOpenUploadModel:h[0]||(h[0]=F=>d())})],6)])}}});var Jt=D(Ht,[["__scopeId","data-v-587a49fc"]]);const Kt={},ie=e=>(U("data-v-26416d86"),e=e(),R(),e),Yt={class:"about-wrapper"},Qt=ie(()=>a("div",{class:"title-1"},"\u5173\u4E8E",-1)),Wt=ie(()=>a("div",{class:"content"},[w(" NIS3366 \u9879\u76EE\u7BA1\u7406\u4E0E\u8F6F\u4EF6\u8BBE\u8BA1"),a("br"),w(" \u5C0F\u4F5C\u4E1A\uFF1A\u56FE\u7247\u4E0A\u4F20\u7BA1\u7406\u5DE5\u5177PicBox"),a("br"),w(" Github\u4ED3\u5E93\u5730\u5740\uFF1A"),a("a",{target:"_blank",href:"https://github.com/Suvanka/picbox"},"https://github.com/Suvanka/picbox "),a("br"),w(" \u7531\u4E8EGithub\u5728\u56FD\u5185\u8BBF\u95EE\u901F\u5EA6\u8F83\u6162\uFF0C\u5FC5\u8981\u65F6\u8BF7\u4F7F\u7528\u4EE3\u7406"),a("br"),a("br"),w(" \u4F5C\u8005\uFF1A\u5218\u51E1\u5609"),a("br"),w(" \u5B66\u53F7\uFF1A520021910751"),a("br")],-1)),Zt=[Qt,Wt];function Xt(e,s){return v(),g("div",Yt,Zt)}var es=D(Kt,[["render",Xt],["__scopeId","data-v-26416d86"]]);const oe=e=>(U("data-v-430eccab"),e=e(),R(),e),ts={class:"index-wrapper"},ss={class:"not-found"},os=oe(()=>a("div",{class:"title"},"\u65E0\u56FE\u7247",-1)),as=oe(()=>a("br",null,null,-1)),ls=oe(()=>a("br",null,null,-1)),ns={style:{"margin-top":"10px"}},us=w("\u4E0A\u4F20\u56FE\u7247 "),rs=w("\u5220\u9664\u6587\u4EF6\u5939 "),is={class:"list"},ds=["onClick"],cs=["data-info","href"],ps=["src"],_s={class:"info"},vs={class:"name"},gs={class:"copy-box"},hs=["data-clipboard-text"],fs=["data-clipboard-text"],ms=["data-clipboard-text"],ws={key:0,class:"footer"},$s=M({emits:["SetLoading","OpenUploadModel"],setup(e,{expose:s,emit:t}){let o=JSON.parse(localStorage.getItem("github_config"));const n=X(),p=ee();let d=m([]),c=m([]);P(()=>n.query,u=>{u.folder&&h(u.folder)}),z(()=>{(o==null?void 0:o.owner)?h(n.query.folder):p.push("/setting")});const h=u=>{t("SetLoading",!0),V.get({url:`/repositories/${o==null?void 0:o.repoId}/contents/${u||""}?t=${new Date().getTime()}`}).then(i=>{c.value=i.data,t("SetLoading",!1),i.data.forEach($=>{$.download_url&&($.origin_url=`https://raw.githubusercontent.com/${o.owner}/${o.repoPath}/main/${u}/${$.name}`,$.cdn_url=`https://cdn.jsdelivr.net/gh/${o.owner}/${o.repoPath}@master/${u}/${$.name}`)});function r($){var H=$.lastIndexOf("."),J=$.substr(H+1);return["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"].indexOf(J.toLowerCase())>=0}d.value=i.data.filter($=>r($.name))}).catch(()=>{t("SetLoading",!1)})},_=u=>{var i=u.substring(u.lastIndexOf("/")+1);return`![${i}](${u})`},F=u=>` ${u}`,A=u=>` ${u}`;let C=m(!1);const f=u=>{t("SetLoading",!0),V.delete({url:`/repos/${o.owner}/${o.repoPath}/contents/${n.query.folder}/${u.name}`,data:{message:"delete a image",sha:u.sha}}).then(()=>{x({type:"success",text:"\u5220\u9664\u6210\u529F"}),h(n.query.folder)}).catch(()=>{t("SetLoading",!1)})},b=()=>{var u;c.value.filter(i=>i.name!=="init").length===0?(C.value=!0,V.delete({url:`/repos/${o.owner}/${o.repoPath}/contents/${n.query.folder}/init`,data:{message:"delete init file",sha:(u=c.value[0])==null?void 0:u.sha}}).then(()=>{x({type:"success",text:"\u5220\u9664\u6210\u529F"}),C.value=!1,p.push("/?reload=true")})):x({type:"danger",text:"\u8BE5\u6587\u4EF6\u5939\u5185\u6709\u5176\u4ED6\u975E\u56FE\u7247\u6587\u4EF6\uFF0C\u4E0D\u80FD\u5220\u9664"})},I=u=>`
    <div class="image-info">
    <div class="item"><span>\u540D\u79F0</span><div>${u.name}</div></div>
    <div class="item"><span>\u5927\u5C0F</span><div>${ue(u.size)}</div></div>
    <div class="item"><span>url</span><div>${u.url}</div></div>
    <div class="item"><span>html_url</span><div>${u.html_url}</div></div>
    <div class="item"><span>git_url</span><div>${u.git_url}</div></div>
    <div class="item"><span>download_url</span><div>${u.download_url}</div> </div>`;return s({GetImages:h}),(u,i)=>(v(),g("div",ts,[k(a("div",ss,[os,as,ls,a("div",ns,[y(S,{onClick:i[0]||(i[0]=r=>t("OpenUploadModel")),type:"primary",style:{width:"120px",margin:"10px auto"}},{default:E(()=>[us]),_:1}),y(S,{onClick:b,type:"danger",loading:l(C),style:{width:"120px",margin:"0 auto"}},{default:E(()=>[rs]),_:1},8,["loading"])])],512),[[B,l(d).length==0]]),k(a("div",is,[(v(!0),g(K,null,Y(l(d),r=>(v(),g("div",{key:`${r.name}`,class:"item"},[a("div",{onClick:$=>f(r),class:"del"},null,8,ds),a("a",{class:"image","data-info":I(r),href:r.cdn_url,"data-fancybox":"gallery"},[a("img",{src:r.cdn_url,loading:"lazy"},null,8,ps)],8,cs),a("div",_s,[a("div",vs,L(r.name),1),a("div",gs,[a("span",{class:"copy-btn","data-clipboard-text":A(r.origin_url),onClick:i[1]||(i[1]=$=>l(te)())},"url ",8,hs),a("span",{class:"copy-btn","data-clipboard-text":F(r.cdn_url),onClick:i[2]||(i[2]=$=>l(te)())},"cdn ",8,fs),a("span",{class:"copy-btn","data-clipboard-text":_(r.cdn_url),onClick:i[3]||(i[3]=$=>l(te)())},"markdown ",8,ms)])])]))),128))],512),[[B,l(d).length>0]]),l(d).length>0?(v(),g("div",ws,L(l(d).length)+" \u5F20\u56FE\u7247 ",1)):T("",!0)]))}});var ys=D($s,[["__scopeId","data-v-430eccab"]]);const xs={class:"form"},Fs={key:0,class:"title-1"},bs={class:"user-info"},ks=["src"],Es={class:"name"},Bs={class:"form"},Is=w(" \u786E\u5B9A "),Ss=w(" \u4FDD\u5B58\u914D\u7F6E "),As=w(" \u5220\u9664\u914D\u7F6E "),Cs=M({setup(e){z(()=>{if(localStorage.getItem("github_config")){let f=JSON.parse(localStorage.getItem("github_config"));t.value=f}else t.value.repoId="";localStorage.getItem("token")&&(o.value=localStorage.getItem("token"),h())});const s=m([]);let t=m({}),o=m(""),n=m(!1),p=m(!1),d=m(!1),c=m(!1);const h=()=>{V.get({url:"/user"}).then(f=>{t.value.owner=f.data.login,t.value.name=f.data.name,t.value.avatarUrl=f.data.avatar_url,localStorage.setItem("github_config",JSON.stringify(t.value)),F()}).catch(()=>{n.value=!1,c.value=!1})},_=()=>{localStorage.setItem("token",o.value),h()},F=()=>{V.get({url:`/users/${t.value.owner}/repos?type=public&sort=created&per_page=100`}).then(f=>{s.value=f.data,n.value=!1,!t.value.repoId&&o.value==" "&&(t.value.repoId=1,A())})},A=()=>{if(!t.value.repoId){x({type:"warning",text:"\u8BF7\u9009\u62E9\u4ED3\u5E93"});return}p.value=!0,t.value.repoPath=s.value.find(f=>t.value.repoId==f.id).name,localStorage.setItem("github_config",JSON.stringify(t.value)),setTimeout(()=>{x({type:"success",text:"\u4FDD\u5B58\u6210\u529F\uFF01"}),p.value=!1,location.reload()},500)},C=()=>{localStorage.removeItem("token"),localStorage.removeItem("github_config"),localStorage.removeItem("history_list"),d.value=!0,x({type:"success",text:"\u5220\u9664\u6210\u529F"}),setTimeout(()=>{d.value=!1,location.reload()},500)};return(f,b)=>(v(),g("div",xs,[l(t).name?T("",!0):(v(),g("div",Fs,"\u8BBE\u7F6E")),k(a("div",bs,[a("img",{class:"avatar",src:l(t).avatarUrl,alt:"",srcset:""},null,8,ks),a("div",Es,L(l(t).name),1)],512),[[B,l(t).name]]),a("div",Bs,[y(l(Q),{title:"Github access token"},{default:E(()=>[y(l(re),{disabled:s.value.length>0,modelValue:l(o),"onUpdate:modelValue":b[0]||(b[0]=I=>N(o)?o.value=I:o=I),placeholder:"\u8BF7\u8F93\u5165token"},null,8,["disabled","modelValue"])]),_:1}),k(y(l(Q),{title:"\u9009\u62E9\u6388\u6743\u7684\u4ED3\u5E93"},{default:E(()=>[y(l(Ge),{modelValue:l(t).repoId,"onUpdate:modelValue":b[1]||(b[1]=I=>l(t).repoId=I),option:s.value,label:"name",value:"id"},null,8,["modelValue","option"])]),_:1},512),[[B,s.value.length>0]])]),k(y(l(S),{type:"primary",onClick:b[2]||(b[2]=I=>{N(n)?n.value=!0:n=!0,_()}),loading:l(n)},{default:E(()=>[Is]),_:1},8,["loading"]),[[B,s.value.length==0]]),k(y(l(S),{type:"primary",onClick:b[3]||(b[3]=I=>A()),loading:l(p)},{default:E(()=>[Ss]),_:1},8,["loading"]),[[B,s.value.length>0]]),k(y(l(S),{type:"danger",onClick:b[4]||(b[4]=I=>C()),loading:l(d)},{default:E(()=>[As]),_:1},8,["loading"]),[[B,s.value.length>0]]),y(l(Q),{title:"",tips:s.value.length==0?`\u83B7\u53D6\u6B65\u9AA4\uFF1A <br />
      \u767B\u5F55Github \u2192 \u70B9\u51FB\u53F3\u4E0A\u89D2\u5934\u50CF \u2192 Settings \u2192 Developer settings \u2192 Personal access tokens \u2192 
      Fine-grained tokens \u2192 Generate new token \u2192 \u586B\u5165\u4FE1\u606F\uFF0C\u9009\u62E9\u5B58\u653E\u56FE\u7247\u7684\u4ED3\u5E93 \u2192 Repository permissions \u2192 
      Contents\u6743\u9650\u6539\u4E3ARead and write \u2192 Generate token \u2192 \u590D\u5236token \u2192 \u7C98\u8D34\u5230\u4E0A\u65B9\u8F93\u5165\u6846<br /><br />
      \u8BFE\u7A0B\u5C55\u793A\u7528token\uFF1A <br />
      github_pat_11AUWR7MY0KGaORihLxYiH_<br />
      NV7DWZmehGKBhf9P1qUkuxYgIsJKjDbccxsQK4GeQAo4NILP3QIVXQF6N7z`:""},null,8,["tips"])]))}});var Ls=D(Cs,[["__scopeId","data-v-35a69f2c"]]);const Ds=[{path:"/",name:"Index",component:ys,meta:{}},{path:"/setting",name:"Setting",component:Ls,meta:{}},{path:"/About",name:"About",component:es,meta:{}}],Ms=be({history:ke(""),routes:Ds,scrollBehavior(e,s,t){return{el:"#app",top:0,behavior:"smooth"}}});const de=Ee(Jt);de.use(Ms);de.mount("#app");
