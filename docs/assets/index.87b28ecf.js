var _e=Object.defineProperty,ve=Object.defineProperties;var ge=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var he=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable;var K=(e,t,s)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,G=(e,t)=>{for(var s in t||(t={}))he.call(t,s)&&K(e,s,t[s]);if(le)for(var s of le(t))fe.call(t,s)&&K(e,s,t[s]);return e},j=(e,t)=>ve(e,ge(t));var ne=(e,t,s)=>(K(e,typeof t!="symbol"?t+"":t,s),s);import{C as me,a as $e,d as M,o as g,c as h,r as ue,n as O,b as a,e as _,t as A,f as N,g as m,w as P,h as E,v as we,i as Fe,F as X,j as Y,p as q,k as R,l as w,m as k,u,q as U,s as Q,x as ee,y as H,z as S,A as ye,B as xe,D as be,E as ke,G as Ee,H as Be}from"./vendor.1aa4b248.js";const Se=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const p of n)if(p.type==="childList")for(const d of p.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function s(n){const p={};return n.integrity&&(p.integrity=n.integrity),n.referrerpolicy&&(p.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?p.credentials="include":n.crossorigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function o(n){if(n.ep)return;n.ep=!0;const p=s(n);fetch(n.href,p)}};Se();const F=({type:e,text:t})=>{let s=document.getElementById("alert-box");var o=document.createElement("div");let n={success:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M352 176L217.6 336L160 272"></path></svg>',warning:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path d="M250.26 166.05L256 288l5.73-121.95a5.74 5.74 0 0 0-5.79-6h0a5.74 5.74 0 0 0-5.68 6z" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M256 367.91a20 20 0 1 1 20-20a20 20 0 0 1-20 20z" fill="currentColor"></path></svg>',danger:'<svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 512 512"><path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M320 320L192 192"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M192 320l128-128"></path></svg>'};o.innerHTML=`${n[e]}<span>${t}</span>`,o.style.cssText="",o.setAttribute("class",`alert alert-${e} shadow`),s.appendChild(o,s.childNodes[0]),setTimeout(()=>{o.setAttribute("class",`alert alert-${e} alert-show shadow`),setTimeout(()=>{o.setAttribute("class",`alert alert-${e} alert-hidden`),setTimeout(()=>{s.removeChild(o)},250)},2500)},10)};function re(e){if(!e)return"";var t=1024;return e<t?e+" b":e<Math.pow(t,2)?(e/t).toFixed(2)+" KB":e<Math.pow(t,3)?(e/Math.pow(t,2)).toFixed(2)+" M":e<Math.pow(t,4)?(e/Math.pow(t,3)).toFixed(2)+" G":(e/Math.pow(t,4)).toFixed(2)+" T"}function te(){var e=new me(".copy-btn");e.on("success",t=>{F({type:"success",text:"\u590D\u5236\u6210\u529F"}),e.destroy()}),e.on("error",t=>{F({type:"danger",text:"\u590D\u5236\u5931\u8D25"}),e.destroy()})}function Ie(e){switch(!0){case e=="Bad credentials":return"access token\u9519\u8BEF";case e.indexOf("wasn't supplied")>=0:return"\u5DF2\u6709\u540C\u540D\u6587\u4EF6\u5939";case e=="This repository is empty.":return"\u5F53\u524D\u4ED3\u5E93\u4E3A\u7A7A\uFF0C\u8BF7\u65B0\u5EFA\u6587\u4EF6\u5939";case e=="path cannot start with a slash":return"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A";case e=="Requires authentication":return"access token\u9519\u8BEF";case e=="Resource not accessible by personal access token":return"\u8BE5\u4ED3\u5E93\u672A\u6388\u6743";default:return"\u672A\u77E5\u9519\u8BEF"}}class Ce{constructor(t){ne(this,"instance");this.instance=$e.create(t),this.instance.interceptors.request.use(s=>{let o=localStorage.getItem("token");return o&&(s.headers={Authorization:`token ${o}`}),s},s=>(console.log(s),Promise.reject(s))),this.instance.interceptors.response.use(s=>s,s=>(s.response.data.message!="Not Found"&&F({type:"danger",text:Ie(s.response.data.message)}),Promise.reject(s)))}request(t){return new Promise((s,o)=>{this.instance.request(t).then(n=>{s(n)}).catch(n=>(o(n),n))})}get(t){return this.request(j(G({},t),{method:"GET"}))}put(t){return this.request(j(G({},t),{method:"PUT"}))}post(t){return this.request(j(G({},t),{method:"POST"}))}patch(t){return this.request(j(G({},t),{method:"PATCH"}))}delete(t){return this.request(j(G({},t),{method:"DELETE"}))}}const T=new Ce({baseURL:"https://api.github.com",timeout:3e4});var L=(e,t)=>{for(const[s,o]of t)e[s]=o;return e};const Ae=M({props:{type:{type:String,default:"default"},loading:{type:Boolean,default:!1}},setup(e){const t=e;return(s,o)=>(g(),h("button",{class:O(["button",`button-${t.type}  ${t.loading?"button-loading":""}`])},[ue(s.$slots,"default",{},void 0,!0)],2))}});var I=L(Ae,[["__scopeId","data-v-831ff948"]]);const De={class:"title-label"},Le=["href"],Me=["innerHTML"],Ve=M({props:{title:{type:String,default:"\u6807\u9898"},direction:{type:String,default:""},small_title:{type:String,default:""},small_title_link:{type:String,default:""},tips:{type:String,default:""}},setup(e){const t=e;return(s,o)=>(g(),h("div",{class:O(["form-item",{isRow:t.direction=="row"}])},[a("label",De,[_(A(t.title)+" ",1),t.small_title?(g(),h("a",{key:0,target:"_blank",href:t.small_title_link},A(t.small_title),9,Le)):N("",!0)]),a("div",null,[ue(s.$slots,"default",{},void 0,!0),e.tips?(g(),h("p",{key:0,class:"tips",innerHTML:e.tips},null,8,Me)):N("",!0)])],2))}});var oe=L(Ve,[["__scopeId","data-v-d1e40378"]]);const Oe=["disabled"],Te=M({props:{modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=m(s.modelValue);P(()=>s.modelValue,()=>{o.value=s.modelValue});const n=p=>{let{value:d}=p.target;t("update:modelValue",d)};return(p,d)=>E((g(),h("input",{"onUpdate:modelValue":d[0]||(d[0]=c=>o.value=c),onInput:n,disabled:s.disabled},null,40,Oe)),[[we,o.value]])}});var ie=L(Te,[["__scopeId","data-v-52faccfe"]]);const Ne=e=>(q("data-v-e9e65260"),e=e(),R(),e),Pe=Ne(()=>a("option",{value:"",hidden:""},"\u8BF7\u9009\u62E9",-1)),qe=["value"],Re=M({props:{modelValue:{type:String||Number,default:""},option:{type:Array,default:[]},label:{type:String||Number,default:""},value:{type:String||Number,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,o=m(s.modelValue);P(()=>s.modelValue,()=>{o.value=s.modelValue});const n=p=>{let{value:d}=p.target;t("update:modelValue",d)};return(p,d)=>E((g(),h("select",{"onUpdate:modelValue":d[0]||(d[0]=c=>o.value=c),onChange:n},[Pe,(g(!0),h(X,null,Y(s.option,c=>(g(),h("option",{value:c[e.value],key:c[e.label]},A(c[e.label]),9,qe))),128))],544)),[[Fe,o.value]])}});var Ue=L(Re,[["__scopeId","data-v-e9e65260"]]);const Ge={class:"form-item btn-box"},je=_(" \u786E\u8BA4 "),ze=_("\u53D6\u6D88"),He=M({props:{isOpen:Boolean},emits:["close","updateFolderList"],setup(e,{emit:t}){const s=e;let o=JSON.parse(localStorage.getItem("github_config")),n=m(""),p=m(!1);const d=()=>{if(!(o==null?void 0:o.repoId)){F({type:"danger",text:"\u8BF7\u5148\u8BBE\u7F6Etoken\u4FE1\u606F"});return}p.value=!0,T.put({url:`/repos/${o.owner}/${o.repoPath}/contents/${n.value}/init`,data:{message:"create a forder",content:"Y3JlYXRlIGEgZm9yZGVy"}}).then(c=>{p.value=!1,F({type:"success",text:"\u521B\u5EFA\u6210\u529F"}),n.value="",t("close"),t("updateFolderList")}).catch(()=>{p.value=!1})};return(c,f)=>(g(),h("div",{class:O(["folder-modal",{isOpen:s.isOpen}])},[w(u(oe),{title:"\u65B0\u5EFA\u6587\u4EF6\u5939"},{default:k(()=>[w(u(ie),{modelValue:u(n),"onUpdate:modelValue":f[0]||(f[0]=v=>U(n)?n.value=v:n=v),placeholder:"\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0"},null,8,["modelValue"])]),_:1}),a("div",Ge,[w(u(I),{onClick:f[1]||(f[1]=v=>d()),type:"primary",loading:u(p)},{default:k(()=>[je]),_:1},8,["loading"]),w(u(I),{onClick:f[2]||(f[2]=v=>t("close")),type:"danger"},{default:k(()=>[ze]),_:1})])],2))}});var Je=L(He,[["__scopeId","data-v-25d89099"]]);const Ze=(e,t)=>new Promise(async s=>{const o=await Xe(e);s({name:`${e.name.substring(0,e.name.lastIndexOf("."))}_${We(4)}`,orginal_size:e.size,orginal_base64data:o.replace(/^data:image\/\w+;base64,/,""),orginal_base64:o,folder:t,ext:Ye(e.name)})}),Xe=e=>new Promise(async t=>{var s=new FileReader;s.readAsDataURL(e),s.onload=function(o){t(o.target.result)}});function Ye(e){var t=/\.[^\.]+$/,s=t.exec(e);return s?s[0]:""}function We(e){return Array.from(Array(Number(e)||24),()=>Math.floor(Math.random()*36).toString(36)).join("")}const W=e=>(q("data-v-2fe1cf1c"),e=e(),R(),e),Ke=W(()=>a("path",{d:"M400 145.49L366.51 112L256 222.51L145.49 112L112 145.49L222.51 256L112 366.51L145.49 400L256 289.49L366.51 400L400 366.51L289.49 256L400 145.49z",fill:"currentColor"},null,-1)),Qe=[Ke],et={class:"upload-list"},tt=W(()=>a("svg",{class:"upload-icon",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},[a("path",{d:"M320 367.79h76c55 0 100-29.21 100-83.6s-53-81.47-96-83.6c-8.89-85.06-71-136.8-144-136.8c-69 0-113.44 45.79-128 91.2c-60 5.7-112 43.88-112 106.4s54 106.4 120 106.4h56",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18"}),a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18",d:"M320 255.79l-64-64l-64 64"}),a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"18",d:"M256 448.21V207.79"})],-1)),ot={class:"title-label"},st={class:"status-box"},at={class:"icon icon-success",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},lt=W(()=>a("path",{fill:"none",stroke:"currentColor","stroke-linecap":"square","stroke-miterlimit":"10","stroke-width":"44",d:"M416 128L192 384l-96-96"},null,-1)),nt=[lt],ut={class:"icon icon-uploading",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},rt=W(()=>a("path",{d:"M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208s208-93.13 208-208S370.87 48 256 48zm83.69 282.65a112.24 112.24 0 0 1-195-61.29a16 16 0 0 1-20.13-24.67l23.6-23.6a16 16 0 0 1 22.37-.25l24.67 23.6a16 16 0 0 1-18 26a80.25 80.25 0 0 0 138.72 38.83a16 16 0 0 1 23.77 21.41zm47.76-63.34l-23.6 23.6a16 16 0 0 1-22.37.25l-24.67-23.6a16 16 0 0 1 17.68-26.11A80.17 80.17 0 0 0 196 202.64a16 16 0 1 1-23.82-21.37a112.17 112.17 0 0 1 194.88 61.57a16 16 0 0 1 20.39 24.47z",fill:"currentColor"},null,-1)),it=[rt],dt={class:"info"},ct={class:"name"},pt={class:"tag-box"},_t={class:"tag folder"},vt={class:"tag orginal-size"},gt=["src"],ht={class:"btn-box"},ft=_("\u6E05\u7A7A"),mt=_("\u4E0A\u4F20"),$t=M({props:{isOpen:Boolean,folders:Array},emits:["Close","SetLoading"],setup(e,{emit:t}){const s=e;let o=JSON.parse(localStorage.getItem("github_config"));const n=Q(),p=ee();let d=m(n.query.folder),c=m([]),f=m(null),v=m(!1),y=m(!1);P(()=>n.query,l=>{d.value=l.folder||""}),P(()=>d.value,l=>{n.path!="/setting"&&p.push(`/?folder=${l}`)}),H(()=>{let l=document.getElementById("drop-area");l.addEventListener("drop",C,!1);let i="";l.addEventListener("dragleave",r=>{clearTimeout(i),i=setTimeout(()=>{r.stopPropagation(),r.preventDefault(),y.value=!1},100)}),l.addEventListener("dragover",r=>{r.stopPropagation(),r.preventDefault(),y.value=!0})});const D=l=>{if(!d.value){F({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}let i=l.target.files;x(i)},C=l=>{if(!d.value){F({type:"danger",text:"\u8BF7\u9009\u62E9\u6587\u4EF6\u5939"});return}let i=l.dataTransfer.files;y.value=!1,l.stopPropagation(),l.preventDefault();let r=[];for(let $=0;$<=i.length-1;$++)i[$].type.indexOf("image")!==-1?r.push(i[$]):F({type:"danger",text:`${i[$].name}\u4E0D\u662F\u56FE\u7247\u6587\u4EF6`});x(r)},x=async l=>{v.value=!0,F({type:"warning",text:"\u6B63\u5728\u8BFB\u53D6"});let i=[];i=await Promise.all([...l].map(r=>Ze(r,d.value))),F({type:"success",text:"\u8BFB\u53D6\u5B8C\u6210"}),v.value=!1,c.value=c.value.concat(i)},B=async l=>{f.value=l;let i=0;await Promise.all(c.value.map((r,$)=>(c.value[$].status="uploading",new Promise(J=>{let Z=`${r.name}${r.ext}`;setTimeout(()=>{T.put({url:`/repos/${o.owner}/${o.repoPath}/contents/${d.value}/${Z}`,data:{message:"upload images",content:r.orginal_base64data}}).then(pe=>{let z=pe.data.content;r.status="success",c.value[$].status="success",r.url=z.url,r.download_url=z.download_url,r.cdn_url=`https://git.pink/${o.owner}/${o.repoPath}/blob/main/${d.value}/${Z}?raw=true`,r.html_url=z.html_url,r.git_url=z.git_url,r.sha=z.sha,r.upload_type=l,b(r),J(200)}).catch(()=>{r.status="fail",c.value[$].status="fail",J(400)})},i+=1e3)})))),F({type:"success",text:"\u4E0A\u4F20\u5B8C\u6210"}),f.value=0,c.value=c.value.filter(r=>r.status!="success"),p.push(n.fullPath+="&t="+new Date().getTime())},b=l=>{l.name,l.orginal_size,l.folder,l.status,l.ext,l.cdn_url};return(l,i)=>(g(),h("div",{class:O(["image-modal",{isOpen:s.isOpen}]),id:"drop-area"},[(g(),h("svg",{onClick:i[0]||(i[0]=r=>t("Close")),class:"icon-close",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Qe)),a("div",et,[a("label",{class:O(["upload-box",{dropActive:u(y),uploadBoxLoading:u(v)}])},[tt,_(A(u(y)?"\u677E\u5F00\u9F20\u6807\u4E0A\u4F20\u6587\u4EF6":"\u70B9\u51FB\u6216\u62D6\u62FD\u5230\u6B64\u5904\u4E0A\u4F20\u6587\u4EF6")+" ",1),E(a("input",{onChange:D,type:"file",name:"file",accept:"image/*",multiple:""},null,544),[[S,!1]])],2),E(a("div",ot,"\u5F85\u4E0A\u4F20\u56FE\u7247",512),[[S,u(c).length>0]]),(g(!0),h(X,null,Y(u(c),r=>(g(),h("div",{key:r.name,class:"item"},[a("div",st,[E((g(),h("svg",at,nt,512)),[[S,r.status=="success"]]),E((g(),h("svg",ut,it,512)),[[S,r.status=="uploading"]])]),a("div",dt,[a("div",ct,A(`${r.name}${r.ext}`),1),a("div",pt,[a("span",_t,A(r.folder),1),a("span",vt,A(u(re)(r.orginal_size)),1)])]),a("img",{src:r.orginal_base64,class:"image"},null,8,gt)]))),128))]),a("div",ht,[E(w(u(I),{style:{width:"220px"},onClick:i[1]||(i[1]=r=>U(c)?c.value=[]:c=[]),type:"danger"},{default:k(()=>[ft]),_:1},512),[[S,u(c).length>0]]),E(w(u(I),{onClick:i[2]||(i[2]=r=>B(1)),type:"primary",style:{width:"220px"},loading:u(f)==1},{default:k(()=>[mt]),_:1},8,["loading"]),[[S,u(c).length>0]])])],2))}});var wt=L($t,[["__scopeId","data-v-2fe1cf1c"]]);const se=e=>(q("data-v-6138e670"),e=e(),R(),e),Ft={class:"wrapper"},yt={class:"sidebar"},xt=se(()=>a("div",{class:"header"},[a("div",{class:"mask"}),a("div",{class:"logo"},"PicBox")],-1)),bt=["href"],kt=se(()=>a("span",{class:"status-point"},null,-1)),Et={class:"tips"},Bt={key:0},St={key:1},It={key:2},Ct=_("\u672A\u8BBE\u7F6Etoken"),At=se(()=>a("br",null,null,-1)),Dt=_("\u8BF7\u70B9\u51FB\u4E0B\u65B9\u8BBE\u7F6E"),Lt=[Ct,At,Dt],Mt=_(" \u65B0\u5EFA\u6587\u4EF6\u5939 "),Vt={class:"handle-box"},Ot=_(" \u4E0A\u4F20\u56FE\u7247 "),Tt=_(" \u65B0\u5EFA\u6587\u4EF6\u5939 "),Nt={href:"/picbox/#/setting"},Pt=_(" \u8BBE\u7F6E "),qt={href:"/picbox/#/about"},Rt=_(" \u5173\u4E8E "),Ut=M({emits:["SetImageModal"],setup(e,{expose:t,emit:s}){let o=JSON.parse(localStorage.getItem("github_config"));const n=Q(),p=ee();let d=m([]),c=m(!1),f=m(!1),v=m(!1);H(()=>{(o==null?void 0:o.repoId)&&y()}),P(()=>n.query,C=>{v.value=!1,!(o==null?void 0:o.owner)&&n.path!="/setting"&&n.path!="/about"?p.push("/setting"):n.query.reload&&y()}),P(()=>f.value,C=>{f.value?s("SetImageModal",!0):s("SetImageModal",!1)});const y=()=>{c.value=!0,T.get({url:`/repositories/${o.repoId}/contents?t=${new Date().getTime()}`}).then(C=>{c.value=!1,d.value=C.data.filter(x=>x.type=="dir"),n.path=="/"&&!n.query.folder&&p.push(`/?folder=${d.value[0].name}`)}).catch(()=>{c.value=!1})},D=()=>{if(!(o==null?void 0:o.repoId)){F({type:"danger",text:"\u8BF7\u5148\u8BBE\u7F6Etoken\u4FE1\u606F"});return}f.value=!f.value};return t({changeImageModel:D}),(C,x)=>{var B,b,l;return g(),h("div",Ft,[a("div",yt,[xt,a("div",{class:O(["folder",{loading:u(c)}])},[(g(!0),h(X,null,Y(u(d),(i,r)=>(g(),h("a",{key:r,class:O(["item",{active:u(n).query.folder==i.name}]),href:`/picbox/#/?folder=${i.name}`},[_(A(i.name)+" ",1),kt],10,bt))),128)),E(a("div",Et,[u(d).length!=0?(g(),h("span",Bt,A(u(d).length)+" \u4E2A\u6587\u4EF6\u5939",1)):N("",!0),((B=u(o))==null?void 0:B.owner)&&u(d).length==0?(g(),h("span",St,"\u6682\u65E0\u6587\u4EF6\u5939 ")):N("",!0),((b=u(o))==null?void 0:b.owner)?N("",!0):(g(),h("span",It,Lt))],512),[[S,!u(c)]]),((l=u(o))==null?void 0:l.owner)&&u(d).length==0?E((g(),ye(I,{key:0,style:{"margin-top":"10px"},type:"primary",onClick:x[0]||(x[0]=i=>U(v)?v.value=!u(v):v=!u(v))},{default:k(()=>[Mt]),_:1},512)),[[S,!u(c)]]):N("",!0)],2),w(Je,{onClose:x[1]||(x[1]=i=>U(v)?v.value=!1:v=!1),onUpdateFolderList:x[2]||(x[2]=i=>y()),isOpen:u(v)},null,8,["isOpen"]),a("div",Vt,[w(I,{onClick:D},{default:k(()=>[Ot]),_:1}),w(I,{onClick:x[3]||(x[3]=i=>U(v)?v.value=!u(v):v=!u(v))},{default:k(()=>[Tt]),_:1}),a("a",Nt,[w(I,null,{default:k(()=>[Pt]),_:1})]),a("a",qt,[w(I,null,{default:k(()=>[Rt]),_:1})])])]),w(wt,{isOpen:u(f),folders:u(d),onClose:D},null,8,["isOpen","folders"])])}}});var Gt=L(Ut,[["__scopeId","data-v-6138e670"]]);const jt=e=>(q("data-v-587a49fc"),e=e(),R(),e),zt={class:"wrapper"},Ht=jt(()=>a("div",{id:"alert-box"},null,-1)),Jt=M({setup(e){let t=m(!1),s=m(!1);const o=c=>{t.value=c},n=c=>{s.value=c},p=m(null),d=()=>{p.value.changeImageModel()};return H(()=>{localStorage.getItem("github_config")&&JSON.parse(localStorage.getItem("github_config"))}),(c,f)=>{const v=xe("router-view");return g(),h("div",zt,[Ht,w(Gt,{onSetImageModal:o,ref:(y,D)=>{D.sideberRef=y,p.value=y}},null,512),a("div",{class:O(["main",{loading:u(s)}]),id:"main",style:be(u(t)?"width:calc(100% - 500px);margin-left:300px":"width:calc(100% - 200px)")},[w(v,{onSetLoading:n,onOpenUploadModel:f[0]||(f[0]=y=>d())})],6)])}}});var Zt=L(Jt,[["__scopeId","data-v-587a49fc"]]);const Xt={},de=e=>(q("data-v-e55d927c"),e=e(),R(),e),Yt={class:"about-wrapper"},Wt=de(()=>a("div",{class:"title-1"},"\u5173\u4E8E",-1)),Kt=de(()=>a("div",{class:"content"},[_(" NIS3366 \u9879\u76EE\u7BA1\u7406\u4E0E\u8F6F\u4EF6\u8BBE\u8BA1"),a("br"),_(" \u5C0F\u4F5C\u4E1A\uFF1A\u56FE\u7247\u4E0A\u4F20\u7BA1\u7406\u5DE5\u5177PicBox"),a("br"),_(" Github\u4ED3\u5E93\u5730\u5740\uFF1A"),a("a",{target:"_blank",href:"https://github.com/Suvanka/picbox"},"https://github.com/Suvanka/picbox "),a("br"),_(" \u7531\u4E8EGithub\u5728\u56FD\u5185\u8BBF\u95EE\u901F\u5EA6\u8F83\u6162\uFF0C\u5FC5\u8981\u65F6\u8BF7\u4F7F\u7528\u4EE3\u7406"),a("br"),a("br"),_(" \u4F5C\u8005\uFF1A\u5218\u51E1\u5609"),a("br"),_(" \u5B66\u53F7\uFF1A520021910751 ")],-1)),Qt=[Wt,Kt];function eo(e,t){return g(),h("div",Yt,Qt)}var to=L(Xt,[["render",eo],["__scopeId","data-v-e55d927c"]]);const ae=e=>(q("data-v-430eccab"),e=e(),R(),e),oo={class:"index-wrapper"},so={class:"not-found"},ao=ae(()=>a("div",{class:"title"},"\u65E0\u56FE\u7247",-1)),lo=ae(()=>a("br",null,null,-1)),no=ae(()=>a("br",null,null,-1)),uo={style:{"margin-top":"10px"}},ro=_("\u4E0A\u4F20\u56FE\u7247 "),io=_("\u5220\u9664\u6587\u4EF6\u5939 "),co={class:"list"},po=["onClick"],_o=["data-info","href"],vo=["src"],go={class:"info"},ho={class:"name"},fo={class:"copy-box"},mo=["data-clipboard-text"],$o=["data-clipboard-text"],wo=["data-clipboard-text"],Fo={key:0,class:"footer"},yo=M({emits:["SetLoading","OpenUploadModel"],setup(e,{expose:t,emit:s}){let o=JSON.parse(localStorage.getItem("github_config"));const n=Q(),p=ee();let d=m([]),c=m([]);P(()=>n.query,l=>{l.folder&&f(l.folder)}),H(()=>{(o==null?void 0:o.owner)?f(n.query.folder):p.push("/setting")});const f=l=>{s("SetLoading",!0),T.get({url:`/repositories/${o==null?void 0:o.repoId}/contents/${l||""}?t=${new Date().getTime()}`}).then(i=>{c.value=i.data,s("SetLoading",!1),i.data.forEach($=>{$.download_url&&($.origin_url=`https://raw.githubusercontent.com/${o.owner}/${o.repoPath}/main/${l}/${$.name}`,$.cdn_url=`https://cdn.jsdelivr.net/gh/${o.owner}/${o.repoPath}@master/${l}/${$.name}`)});function r($){var J=$.lastIndexOf("."),Z=$.substr(J+1);return["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"].indexOf(Z.toLowerCase())>=0}d.value=i.data.filter($=>r($.name))}).catch(()=>{s("SetLoading",!1)})},v=l=>{var i=l.substring(l.lastIndexOf("/")+1);return`![${i}](${l})`},y=l=>` ${l}`,D=l=>` ${l}`;let C=m(!1);const x=l=>{s("SetLoading",!0),T.delete({url:`/repos/${o.owner}/${o.repoPath}/contents/${n.query.folder}/${l.name}`,data:{message:"delete a image",sha:l.sha}}).then(()=>{F({type:"success",text:"\u5220\u9664\u6210\u529F"}),f(n.query.folder)}).catch(()=>{s("SetLoading",!1)})},B=()=>{var l;c.value.filter(i=>i.name!=="init").length===0?(C.value=!0,T.delete({url:`/repos/${o.owner}/${o.repoPath}/contents/${n.query.folder}/init`,data:{message:"delete init file",sha:(l=c.value[0])==null?void 0:l.sha}}).then(()=>{F({type:"success",text:"\u5220\u9664\u6210\u529F"}),C.value=!1,p.push("/?reload=true")})):F({type:"danger",text:"\u8BE5\u6587\u4EF6\u5939\u5185\u6709\u5176\u4ED6\u975E\u56FE\u7247\u6587\u4EF6\uFF0C\u4E0D\u80FD\u5220\u9664"})},b=l=>`
    <div class="image-info">
    <div class="item"><span>\u540D\u79F0</span><div>${l.name}</div></div>
    <div class="item"><span>\u5927\u5C0F</span><div>${re(l.size)}</div></div>
    <div class="item"><span>url</span><div>${l.url}</div></div>
    <div class="item"><span>html_url</span><div>${l.html_url}</div></div>
    <div class="item"><span>git_url</span><div>${l.git_url}</div></div>
    <div class="item"><span>download_url</span><div>${l.download_url}</div> </div>`;return t({GetImages:f}),(l,i)=>(g(),h("div",oo,[E(a("div",so,[ao,lo,no,a("div",uo,[w(I,{onClick:i[0]||(i[0]=r=>s("OpenUploadModel")),type:"primary",style:{width:"120px",margin:"10px auto"}},{default:k(()=>[ro]),_:1}),w(I,{onClick:B,type:"danger",loading:u(C),style:{width:"120px",margin:"0 auto"}},{default:k(()=>[io]),_:1},8,["loading"])])],512),[[S,u(d).length==0]]),E(a("div",co,[(g(!0),h(X,null,Y(u(d),r=>(g(),h("div",{key:`${r.name}`,class:"item"},[a("div",{onClick:$=>x(r),class:"del"},null,8,po),a("a",{class:"image","data-info":b(r),href:r.cdn_url,"data-fancybox":"gallery"},[a("img",{src:r.cdn_url,loading:"lazy"},null,8,vo)],8,_o),a("div",go,[a("div",ho,A(r.name),1),a("div",fo,[a("span",{class:"copy-btn","data-clipboard-text":D(r.origin_url),onClick:i[1]||(i[1]=$=>u(te)())},"url ",8,mo),a("span",{class:"copy-btn","data-clipboard-text":y(r.cdn_url),onClick:i[2]||(i[2]=$=>u(te)())},"cdn ",8,$o),a("span",{class:"copy-btn","data-clipboard-text":v(r.cdn_url),onClick:i[3]||(i[3]=$=>u(te)())},"markdown ",8,wo)])])]))),128))],512),[[S,u(d).length>0]]),u(d).length>0?(g(),h("div",Fo,A(u(d).length)+" \u5F20\u56FE\u7247 ",1)):N("",!0)]))}});var xo=L(yo,[["__scopeId","data-v-430eccab"]]);const V=e=>(q("data-v-0ad8ae1d"),e=e(),R(),e),bo={class:"form"},ko=V(()=>a("div",{class:"title-1"},"\u8BBE\u7F6E",-1)),Eo={class:"form"},Bo=_(" \u786E\u5B9A "),So=_(" \u4FDD\u5B58\u914D\u7F6E "),Io=_(" \u5220\u9664\u914D\u7F6E "),Co={class:"content"},Ao=_(" \u83B7\u53D6\u6B65\u9AA4\uFF1A"),Do=V(()=>a("br",null,null,-1)),Lo=_(" \u2460 \u767B\u5F55Github\uFF0C\u70B9\u51FB\u53F3\u4E0A\u89D2\u5934\u50CF\uFF0C\u9009\u62E9Settings"),Mo=V(()=>a("br",null,null,-1)),Vo=_(" \u2461 \u4F9D\u6B21\u70B9\u51FBDeveloper settings \u2192 Personal access tokens \u2192 Fine-grained tokens \u2192 Generate new token"),Oo=V(()=>a("br",null,null,-1)),To=_(" \u2462 \u586B\u5165\u4FE1\u606F\uFF0C\u9009\u62E9\u5B58\u653E\u56FE\u7247\u7684\u4ED3\u5E93\uFF0C\u5728Repository permissions\u4E2D\u5C06Contents\u6743\u9650\u6539\u4E3ARead and write\uFF0C\u7136\u540EGenerate token"),No=V(()=>a("br",null,null,-1)),Po=_(" \u2463 \u590D\u5236token\uFF0C\u7C98\u8D34\u5230\u4E0A\u65B9\u8F93\u5165\u6846\uFF0C\u9009\u62E9\u76F8\u5E94\u4ED3\u5E93"),qo=V(()=>a("br",null,null,-1)),Ro=V(()=>a("br",null,null,-1)),Uo=_(" token\u4FE1\u606F\u5C06\u4FDD\u5B58\u5728\u672C\u5730\uFF0C\u4E0D\u4F1A\u4E0A\u4F20\u5230\u670D\u52A1\u5668"),Go=V(()=>a("br",null,null,-1)),jo=V(()=>a("br",null,null,-1)),zo=_(" \u8BFE\u7A0B\u5C55\u793A\u7528token\uFF1A"),Ho=V(()=>a("br",null,null,-1)),Jo=M({setup(e){const t=m([]),s=atob("Z2l0aHViX3BhdF8xMUFVV1I3TVkwdmlSYXdMZ1NVZjVNX0dZaVRsS3JVYXIwOVBLVk8zYWx6b1dLUTNMSFRRZ094a3hHTVlRMUhKVDZDS0VHVE1HSHRWMld3OVo1");let o=m({}),n=m(""),p=m(!1),d=m(!1),c=m(!1),f=m(!1);H(()=>{if(localStorage.getItem("github_config")){let B=JSON.parse(localStorage.getItem("github_config"));o.value=B}else o.value.repoId="";localStorage.getItem("token")&&(n.value=localStorage.getItem("token"),v())});const v=()=>{T.get({url:"/user"}).then(B=>{o.value.owner=B.data.login,localStorage.setItem("github_config",JSON.stringify(o.value)),D()}).catch(()=>{p.value=!1,f.value=!1})},y=()=>{localStorage.setItem("token",n.value),v()},D=()=>{T.get({url:`/users/${o.value.owner}/repos?type=public&sort=created&per_page=100`}).then(B=>{t.value=B.data,p.value=!1,!o.value.repoId&&n.value==" "&&(o.value.repoId=1,C())})},C=()=>{if(!o.value.repoId){F({type:"warning",text:"\u8BF7\u9009\u62E9\u4ED3\u5E93"});return}d.value=!0,o.value.repoPath=t.value.find(B=>o.value.repoId==B.id).name,localStorage.setItem("github_config",JSON.stringify(o.value)),setTimeout(()=>{F({type:"success",text:"\u4FDD\u5B58\u6210\u529F\uFF01"}),d.value=!1,location.reload()},500)},x=()=>{localStorage.removeItem("token"),localStorage.removeItem("github_config"),localStorage.removeItem("history_list"),c.value=!0,F({type:"success",text:"\u5220\u9664\u6210\u529F"}),setTimeout(()=>{c.value=!1,location.reload()},500)};return(B,b)=>(g(),h("div",bo,[ko,a("div",Eo,[w(u(oe),{title:"Github access token"},{default:k(()=>[w(u(ie),{disabled:t.value.length>0,modelValue:u(n),"onUpdate:modelValue":b[0]||(b[0]=l=>U(n)?n.value=l:n=l),placeholder:"\u8BF7\u8F93\u5165token"},null,8,["disabled","modelValue"])]),_:1}),E(w(u(oe),{title:"\u9009\u62E9\u6388\u6743\u7684\u4ED3\u5E93"},{default:k(()=>[w(u(Ue),{modelValue:u(o).repoId,"onUpdate:modelValue":b[1]||(b[1]=l=>u(o).repoId=l),option:t.value,label:"name",value:"id"},null,8,["modelValue","option"])]),_:1},512),[[S,t.value.length>0]])]),E(w(u(I),{type:"primary",onClick:b[2]||(b[2]=l=>{U(p)?p.value=!0:p=!0,y()}),loading:u(p)},{default:k(()=>[Bo]),_:1},8,["loading"]),[[S,t.value.length==0]]),E(w(u(I),{type:"primary",onClick:b[3]||(b[3]=l=>C()),loading:u(d)},{default:k(()=>[So]),_:1},8,["loading"]),[[S,t.value.length>0]]),E(w(u(I),{type:"danger",onClick:b[4]||(b[4]=l=>x()),loading:u(c)},{default:k(()=>[Io]),_:1},8,["loading"]),[[S,t.value.length>0]]),a("div",Co,[Ao,Do,Lo,Mo,Vo,Oo,To,No,Po,qo,Ro,Uo,Go,jo,zo,Ho,_(" "+A(u(s)),1)])]))}});var Zo=L(Jo,[["__scopeId","data-v-0ad8ae1d"]]);const Xo=[{path:"/",name:"Index",component:xo,meta:{}},{path:"/setting",name:"Setting",component:Zo,meta:{}},{path:"/About",name:"About",component:to,meta:{}}],Yo=ke({history:Ee(""),routes:Xo,scrollBehavior(e,t,s){return{el:"#app",top:0,behavior:"smooth"}}});const ce=Be(Zt);ce.use(Yo);ce.mount("#app");
